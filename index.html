<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<title>Hangman</title>
	<!-- bootstrap cdn -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">	
	<!-- google fonts -->
	<link href="https://fonts.googleapis.com/css?family=Architects+Daughter" rel="stylesheet">
	<!-- css stylesheet -->
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>
<body>
	<div class="container">
		<nav class="navbar navbar-default">
	        <h1>Hangman</h1>
	    </nav>
		<div class="row">
			<div class="col-md-6">
				<div class="hangman-panel">
					<!-- header -->
					<header>
						<!-- title -->
						<div class="row">
							<h1>Marvel Hangman</h1>
						</div>
						<div class="row">
							<h4><strong>Press any letter to guess!</strong></h4>
						</div>
					</header>
					
					<!-- user score -->
					<div class="row">
						<h5>Wins: 
							<span id="wins"></span>
						</h5>
						<h5>Losses: 
							<span id="losses"></span>
						</h5>
					</div>

					<!-- current user progress -->
					<div class="row">					
						<h3><strong>Guess the Sword:</strong></h3>
						<h3><strong><div id="currentProgress"></div></strong></h3>
					</div>

					<!-- incorrrect letters guessed -->
					<div class="row">
						<h3>Incorrect Letters Guessed:</h3>
						<h4><div id="lettersGuessed"></div></h4>
					</div>

					<!-- guesses remaining -->
					<div class="row">
						<h3>Incorrect Guesses Remaining:</h3>
						<h4><div id="guessesLeft"></div></h4>
					</div>
				</div>
				<div class="bottom-panel"></div>
			</div>
			<div class="col-md-6">
				<img src="./assets/images/purple-sword.png">				
			</div>

		</div>

	</div>
	<!-- jQuery cdn -->
	<script
	src="https://code.jquery.com/jquery-2.2.4.min.js"
	integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
	crossorigin="anonymous"></script>
	<!-- javascript stylesheet -->
	<script>
		var currentProgress = [];
		var allGuesses = [];
		var chosenWord = "";
		var guessesRemaining = 0;
		var wins = 0;
		var losses = 0;

		function start() {	
			// create array with possible word choices
			var possibleWords = [ "thor", "spiderman", "loki", "thanos", "groot", "ultorn", "storm", "electra", "rouge", 
								  "magneto", "dormammu", "cyclopse", "wolverine", "deadpool", "hawkeye", "daredevil", 
								  "blade", "apocalypse", "gamora", "rocket", "hulk", "juggernaut", "cable", "beast" ];
			
			// choose a word at random
			chosenWord = possibleWords[Math.floor(Math.random()*possibleWords.length)];
			console.log(chosenWord);
			
			// tell user how many guesses he has left
			guessesRemaining = chosenWord.length + 5;
			$('#guessesLeft').append(guessesRemaining);
			
			// show user how many WINS he has
			$('#wins').empty();
			$('#wins').append(wins);
			
			// show user how many LOSSES he has
			$('#losses').empty();
			$('#losses').append(losses);

			// Guess This Word
			// show user currentProgress (and how many letters are in the chosenWord)
			// currentProgress _ equal to the number of letters in the chosenWord
			for (var i = 0; i < chosenWord.length; i++) {
				chosenWord[i] = currentProgress.push("_");
			}
			
			// append _ word to the page
			$('#currentProgress').empty();
			$('#currentProgress').append(currentProgress.join(" "));
		}

		// reset current after user wins or loses.
		function reset() {
			currentProgress = [];
			allGuesses = [];
			guessesRemaining = 0;
			$('#currentProgress').empty();
			$('#guessesLeft').empty();
			$('#lettersGuessed').empty();
			start();
		}

		// LOG USER INPUT
		// ===============================================
		$(document).keydown(function(event) {
			// grabs user input and makes it lower case
			var userGuess = String.fromCharCode(event.keyCode).toLowerCase();
			
			// if user input is not a letter, alert.
			// if user input is a letter, continue.
			var letter = /^[a-z]+$/; 
			if (!userGuess.match(letter)) {
				alert('Please input letters only.')
			}else{	
				for (var i = 0; i < chosenWord.length; i++) {			
					if (chosenWord.charAt(i) == userGuess) {
						currentProgress[i] = userGuess;
						$('#currentProgress').empty();
						$('#currentProgress').append(currentProgress.join(" "));
					}
				}

				// User Guesses Incorrectly
				// check allGuesses array to see if userGuess exists. If not, add it to the array
				if (allGuesses.indexOf(userGuess) == -1 && chosenWord.indexOf(userGuess) == -1) {
					allGuesses.push(userGuess);
			
					// decrement the number of guesses remaining
					// show guessesRemaining to the user
					guessesRemaining -= 1;
					$('#guessesLeft').empty();
					$('#guessesLeft').append(guessesRemaining);			
				}
			
				// show lettersGuessed to the user
				$('#lettersGuessed').empty();
				$('#lettersGuessed').append(allGuesses.join(", "));

				// User Wins
				// if user has replaced all _ with the correct letter
				// increment the number of wins and ask user to play again
				if (currentProgress.indexOf("_") == -1) {
					wins += 1;
					$('#wins').empty();
					$('#wins').append(wins);
					setTimeout(function() { 
						var again = confirm("Congratulations! You won.\n\nPlay again?");
						if (again == true) {
							reset();
						}
					}, 250);
				}

				// User Loses
				// if user has run out of guesses
				if (guessesRemaining == 0) {
					losses += 1;
					$('#losses').empty();
					$('#losses').append(losses);
					setTimeout(function() {
						var again = confirm("You lost!\n\nPlay again?");
						if (again == true) {
							reset();
						}
					}, 250);
				}
			}
		});

		   
		start();
	</script>
</body>
</html>